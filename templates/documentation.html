<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Compatibility Finder Documentation</title>
    
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Custom styles -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#001A70',
                    }
                }
            }
        }
    </script>
    
    <style>
        /* Table styles */
        .doc-table {
            border-collapse: collapse;
            width: 100%;
        }
        .doc-table th, .doc-table td {
            border: 1px solid #e5e7eb;
            padding: 8px 12px;
        }
        .doc-table th {
            background-color: #f3f4f6;
            text-align: left;
        }
        .doc-table tr:nth-child(even) {
            background-color: #f9fafb;
        }
        
        /* Code block styles */
        .code-block {
            background-color: #f3f4f6;
            border-radius: 6px;
            padding: 12px;
            font-family: monospace;
            overflow-x: auto;
            white-space: pre;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <header class="bg-white shadow-sm">
        <div class="max-w-7xl mx-auto py-4 px-4 sm:px-6 lg:px-8 flex items-center justify-between">
            <div class="flex items-center">
                <img src="{{ url_for('static', filename='images/logo-header.png') }}" alt="Logo" class="h-12">
                <h1 class="ml-4 text-2xl font-bold text-gray-900">Compatibility Finder Documentation</h1>
            </div>
            <nav>
                <a href="/" class="text-primary hover:text-indigo-900 text-sm font-medium">Return to App</a>
            </nav>
        </div>
    </header>
    
    <main class="max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8">
        <div class="bg-white shadow sm:rounded-lg">
            <div class="px-4 py-5 sm:p-6">
                <div class="text-lg leading-6 font-medium text-gray-900 mb-6">Table of Contents</div>
                <ul class="list-disc pl-5 space-y-1 text-sm text-gray-600">
                    <li><a href="#overview" class="text-primary hover:underline">Application Overview</a></li>
                    <li><a href="#search" class="text-primary hover:underline">Search Functionality</a></li>
                    <li><a href="#compatibility" class="text-primary hover:underline">Compatibility Logic</a></li>
                    <li><a href="#filters" class="text-primary hover:underline">Filtering System</a></li>
                    <li><a href="#data-updates" class="text-primary hover:underline">Data Update Process</a></li>
                    <li><a href="#architecture" class="text-primary hover:underline">Application Architecture</a></li>
                    <li><a href="#faq" class="text-primary hover:underline">FAQ & Troubleshooting</a></li>
                </ul>
            </div>
        </div>
        
        <section id="overview" class="mt-8 bg-white shadow sm:rounded-lg">
            <div class="px-4 py-5 sm:p-6">
                <h2 class="text-xl font-semibold text-gray-900 mb-4">Application Overview</h2>
                <p class="text-gray-600 mb-4">
                    The Compatibility Finder is a web-based application designed to help users identify compatible bathroom products. 
                    By searching for a specific SKU, users can find all compatible products across various categories such as:
                </p>
                <ul class="list-disc pl-5 mb-4 text-gray-600">
                    <li>Shower Bases</li>
                    <li>Shower Doors</li>
                    <li>Tub Doors</li>
                    <li>Shower Walls</li>
                    <li>Return Panels</li>
                    <li>Bathtubs</li>
                </ul>
                <p class="text-gray-600 mb-4">
                    The application uses real-time data from an Excel spreadsheet that is automatically updated daily through FTP.
                    It implements sophisticated compatibility algorithms to match products based on dimensions, series compatibility,
                    and brand/family relationships.
                </p>
            </div>
        </section>
        
        <section id="search" class="mt-8 bg-white shadow sm:rounded-lg">
            <div class="px-4 py-5 sm:p-6">
                <h2 class="text-xl font-semibold text-gray-900 mb-4">Search Functionality</h2>
                <p class="text-gray-600 mb-4">
                    The search functionality allows users to find products by either SKU or product name.
                </p>
                
                <h3 class="text-lg font-medium text-gray-900 mb-2">Search Features:</h3>
                <ul class="list-disc pl-5 mb-4 text-gray-600">
                    <li><strong>Suggestive Search:</strong> As you type (3+ characters), the system suggests matching SKUs and product names</li>
                    <li><strong>Dual Search:</strong> Search by either SKU or product name</li>
                    <li><strong>Keyboard Navigation:</strong> Use arrow keys to navigate suggestions and Enter to select</li>
                </ul>
                
                <h3 class="text-lg font-medium text-gray-900 mb-2">How Search Works:</h3>
                <ol class="list-decimal pl-5 mb-4 text-gray-600">
                    <li>As you type, the application sends a request to the server with your query</li>
                    <li>The server searches across all Excel worksheets for matches in both SKU and Product Name fields</li>
                    <li>Matching results are returned to the dropdown in format "SKU - Product Name"</li>
                    <li>When you select an item, only the SKU portion is extracted for searching</li>
                    <li>The search then finds the detailed information for that SKU and identifies all compatible products</li>
                </ol>
                
                <h3 class="text-lg font-medium text-gray-900 mb-2">Implementation Details:</h3>
                <p class="text-gray-600 mb-4">
                    The search functionality is implemented using AlpineJS for the UI interactions and vanilla JavaScript DOM manipulation
                    for the suggestion dropdown. Search requests are processed by a Flask endpoint that queries the in-memory data.
                </p>
                <div class="code-block text-sm text-gray-800">
// When a suggestion is selected:
function selectSuggestionDirect(suggestion, index) {
    // Extract just the SKU part (everything before the " - ")
    const skuMatch = suggestion.match(/^(.*?)(?:\s+-\s+|$)/);
    const extractedSku = skuMatch ? skuMatch[1].trim() : suggestion;
    
    // Update the search input with just the SKU
    this.searchInput = extractedSku;
    
    // Close suggestions dropdown
    this.closeSuggestions();
}</div>
            </div>
        </section>
        
        <section id="compatibility" class="mt-8 bg-white shadow sm:rounded-lg">
            <div class="px-4 py-5 sm:p-6">
                <h2 class="text-xl font-semibold text-gray-900 mb-4">Product Compatibility Logic</h2>
                <p class="text-gray-600 mb-4">
                    The compatibility system uses sophisticated algorithms to match products based on dimensions, series compatibility,
                    brand relationships, and specific business rules for each product category. The system supports bidirectional
                    compatibility searches.
                </p>
                
                <h3 class="text-lg font-medium text-gray-900 mb-4">Shower Base Compatibility</h3>
                <p class="text-gray-600 mb-4">
                    When searching for a shower base, the system finds compatible shower doors, shower screens, walls, and return panels.
                </p>
                
                <h4 class="text-md font-medium text-gray-800 mb-2">Shower Doors:</h4>
                <ul class="list-disc pl-5 mb-4 text-gray-600">
                    <li><strong>Dimensional Match:</strong> Base max door width must be between door's minimum and maximum width</li>
                    <li><strong>Installation Type:</strong> Only alcove and corner bases are compatible with doors</li>
                    <li><strong>Series Compatibility:</strong> Must pass series compatibility rules</li>
                    <li><strong>Door Type Validation:</strong> Only approved door types (Pivot, Sliding, Bypass) are considered</li>
                </ul>
                
                <h4 class="text-md font-medium text-gray-800 mb-2">Shower Screens:</h4>
                <ul class="list-disc pl-5 mb-4 text-gray-600">
                    <li><strong>Width Calculation:</strong> Max Door Width - Fixed Panel Width must be > 22 inches</li>
                    <li><strong>Installation Type:</strong> Compatible with both alcove and corner bases</li>
                    <li><strong>Series Compatibility:</strong> Must pass series compatibility rules</li>
                </ul>
                
                <h4 class="text-md font-medium text-gray-800 mb-2">Walls:</h4>
                <ul class="list-disc pl-5 mb-4 text-gray-600">
                    <li><strong>Brand/Family Match:</strong> Uses brand family matching logic</li>
                    <li><strong>Nominal Dimensions:</strong> Exact match preferred for shower-type walls</li>
                    <li><strong>Series Compatibility:</strong> Must pass series compatibility rules</li>
                    <li><strong>Special Rules:</strong> "utile" and "nextile" families have specific base family requirements</li>
                </ul>
                
                <h3 class="text-lg font-medium text-gray-900 mb-4">Bathtub Compatibility</h3>
                <p class="text-gray-600 mb-4">
                    Bathtub compatibility includes tub doors, tub screens, and walls with specific dimensional matching.
                </p>
                
                <h4 class="text-md font-medium text-gray-800 mb-2">Tub Doors:</h4>
                <ul class="list-disc pl-5 mb-4 text-gray-600">
                    <li><strong>Installation Requirement:</strong> Only alcove bathtubs are compatible with doors</li>
                    <li><strong>Dimensional Match:</strong> Tub max door width must be between door's minimum and maximum width</li>
                    <li><strong>Series Compatibility:</strong> Must pass bathtub series compatibility rules</li>
                </ul>
                
                <h4 class="text-md font-medium text-gray-800 mb-2">Tub Screens:</h4>
                <ul class="list-disc pl-5 mb-4 text-gray-600">
                    <li><strong>Installation Requirement:</strong> Only alcove bathtubs are compatible with screens</li>
                    <li><strong>Width Calculation:</strong> Tub Max Door Width - Screen Fixed Panel Width must be > 22 inches</li>
                    <li><strong>Series Compatibility:</strong> Must pass bathtub series compatibility rules</li>
                </ul>
                
                <h4 class="text-md font-medium text-gray-800 mb-2">Walls:</h4>
                <ul class="list-disc pl-5 mb-4 text-gray-600">
                    <li><strong>Exact Nominal Match:</strong> Priority given to walls with exact nominal dimensions</li>
                    <li><strong>Cut-to-Size Walls:</strong> For walls marked "Cut to Size = Yes", finds closest dimensions that are larger than tub</li>
                    <li><strong>Family Grouping:</strong> Cut walls are grouped by family and closest match per family is selected</li>
                    <li><strong>Brand/Family Rules:</strong> Special matching rules for bathtub brand/family combinations</li>
                </ul>
                
                <h3 class="text-lg font-medium text-gray-900 mb-4">Shower Compatibility</h3>
                <p class="text-gray-600 mb-4">
                    Shower units are compatible with doors based on dimensional and series matching.
                </p>
                
                <h4 class="text-md font-medium text-gray-800 mb-2">Shower Doors:</h4>
                <ul class="list-disc pl-5 mb-4 text-gray-600">
                    <li><strong>Dimensional Match:</strong> Shower max door width must be between door's minimum and maximum width</li>
                    <li><strong>Series Compatibility:</strong> Must pass series compatibility rules</li>
                    <li><strong>Installation Match:</strong> Shower installation type must match door requirements</li>
                </ul>
                
                <h3 class="text-lg font-medium text-gray-900 mb-4">Tub Shower Compatibility</h3>
                <p class="text-gray-600 mb-4">
                    Tub showers use similar logic to regular showers but with specific tub shower requirements.
                </p>
                
                <h3 class="text-lg font-medium text-gray-900 mb-4">Bidirectional Screen Compatibility</h3>
                <p class="text-gray-600 mb-4">
                    The system supports reverse compatibility searches for screens to find compatible bases/tubs.
                </p>
                
                <h4 class="text-md font-medium text-gray-800 mb-2">Shower Screen → Shower Base:</h4>
                <ul class="list-disc pl-5 mb-4 text-gray-600">
                    <li><strong>Width Calculation:</strong> Base Max Door Width - Screen Fixed Panel Width must be > 22 inches</li>
                    <li><strong>Installation Types:</strong> Finds alcove and corner bases</li>
                    <li><strong>Series Compatibility:</strong> Must pass series compatibility rules</li>
                </ul>
                
                <h4 class="text-md font-medium text-gray-800 mb-2">Tub Screen → Bathtub:</h4>
                <ul class="list-disc pl-5 mb-4 text-gray-600">
                    <li><strong>Width Calculation:</strong> Tub Max Door Width - Screen Fixed Panel Width must be > 22 inches</li>
                    <li><strong>Series Compatibility:</strong> Must pass bathtub series compatibility rules</li>
                </ul>
                
                <h3 class="text-lg font-medium text-gray-900 mb-4">Series Compatibility Rules</h3>
                <p class="text-gray-600 mb-4">
                    Series compatibility is a core business rule that determines which product lines work together.
                </p>
                
                <h4 class="text-md font-medium text-gray-800 mb-2">General Rules:</h4>
                <ul class="list-disc pl-5 mb-4 text-gray-600">
                    <li><strong>Same Series:</strong> Products with identical series are always compatible</li>
                    <li><strong>Empty Series:</strong> If either product has no series, they are considered compatible</li>
                    <li><strong>Retail Series:</strong> Compatible with Retail, MAAX, and Swan series</li>
                    <li><strong>MAAX Series:</strong> Compatible with Retail, MAAX, Collection, and Professional</li>
                    <li><strong>Collection/Professional:</strong> Compatible with MAAX, Collection, and Professional</li>
                    <li><strong>Swan Series:</strong> Only compatible with Swan and Retail</li>
                </ul>
                
                <h3 class="text-lg font-medium text-gray-900 mb-4">Brand/Family Matching Logic</h3>
                
                <h4 class="text-md font-medium text-gray-800 mb-2">Same Brand Rules:</h4>
                <ul class="list-disc pl-5 mb-4 text-gray-600">
                    <li>If both products have the same brand, family must also match (if both have families)</li>
                    <li>Products without family information are considered compatible within the same brand</li>
                </ul>
                
                <h4 class="text-md font-medium text-gray-800 mb-2">Cross-Brand Rules:</h4>
                <ul class="list-disc pl-5 mb-4 text-gray-600">
                    <li><strong>Neptune ↔ Maax:</strong> Special compatibility rule allowing Neptune bases with Maax walls</li>
                    <li><strong>w&b Family:</strong> Products with "w&b" family only match with other "w&b" family products</li>
                    <li><strong>utile/nextile Families:</strong> Special wall families with specific base family requirements</li>
                </ul>
                
                <h3 class="text-lg font-medium text-gray-900 mb-4">Advanced Features</h3>
                
                <h4 class="text-md font-medium text-gray-800 mb-2">Combo Products:</h4>
                <p class="text-gray-600 mb-4">
                    Some doors are sold with return panels as combinations. The system handles these by:
                </p>
                <ul class="list-disc pl-5 mb-4 text-gray-600">
                    <li>Combining door and return panel information</li>
                    <li>Using door properties for compatibility checking</li>
                    <li>Displaying both components in results</li>
                    <li>Proper ranking based on door component</li>
                </ul>
                
                <h4 class="text-md font-medium text-gray-800 mb-2">Blacklist/Whitelist System:</h4>
                <ul class="list-disc pl-5 mb-4 text-gray-600">
                    <li><strong>Blacklist:</strong> Prevents specific SKU pairs from being shown as compatible</li>
                    <li><strong>Whitelist:</strong> Overrides incompatibility reasons for specific SKU pairs</li>
                    <li><strong>Order Agnostic:</strong> Works regardless of search direction (A→B or B→A)</li>
                </ul>
                
                <h4 class="text-md font-medium text-gray-800 mb-2">Incompatibility Reasons:</h4>
                <p class="text-gray-600 mb-4">
                    When products cannot be matched, the system provides specific reasons:
                </p>
                <ul class="list-disc pl-5 mb-4 text-gray-600">
                    <li>"Doors can't fit" - when dimensional requirements aren't met</li>
                    <li>"Walls can't fit" - when wall dimensions are incompatible</li>
                    <li>Custom messages from the data for specific scenarios</li>
                </ul>
            </div>
        </section>
        
        <section id="filters" class="mt-8 bg-white shadow sm:rounded-lg">
            <div class="px-4 py-5 sm:p-6">
                <h2 class="text-xl font-semibold text-gray-900 mb-4">Filtering System</h2>
                <p class="text-gray-600 mb-4">
                    The filtering system allows users to refine compatibility results based on various criteria:
                </p>
                
                <h3 class="text-lg font-medium text-gray-900 mb-2">Filter Types:</h3>
                <ul class="list-disc pl-5 mb-4 text-gray-600">
                    <li><strong>Categories:</strong> Filter by product type (Shower Doors, Walls, etc.)</li>
                    <li><strong>Brands:</strong> Filter by manufacturer brand</li>
                    <li><strong>Series:</strong> Filter by product series</li>
                    <li><strong>Glass Thickness:</strong> Filter by glass thickness (6mm, 8mm, etc.)</li>
                    <li><strong>Door Types:</strong> Filter by door type (Sliding, Pivot, Bypass)</li>
                </ul>
                
                <h3 class="text-lg font-medium text-gray-900 mb-2">How Filtering Works:</h3>
                <p class="text-gray-600 mb-4">
                    When search results are displayed, the system analyzes all compatible products and extracts available filter options.
                    These options are dynamically populated based on the current search results. When filters are applied:
                </p>
                <ol class="list-decimal pl-5 mb-4 text-gray-600">
                    <li>The original compatibility results are preserved</li>
                    <li>Each selected filter narrows down the visible results</li>
                    <li>Multiple filters can be combined (e.g., Brand + Series)</li>
                    <li>Combo products are filtered based on their main component's attributes</li>
                    <li>Empty categories are automatically hidden</li>
                </ol>
                
                <h3 class="text-lg font-medium text-gray-900 mb-2">Implementation Detail:</h3>
                <div class="code-block text-sm text-gray-800">
function applyFilters() {
    // Start with a copy of the original compatible products
    this.filteredCompatibleProducts = JSON.parse(JSON.stringify(this.compatibleProducts));
    
    // Apply category filters if any are selected
    if (this.filters.selectedCategories.length > 0) {
        this.filteredCompatibleProducts = this.filteredCompatibleProducts.filter(category => 
            this.filters.selectedCategories.includes(category.category)
        );
    }
    
    // Apply product-level filters to each category's products
    this.filteredCompatibleProducts.forEach(category => {
        if (!category.products) return;
        
        category.products = category.products.filter(product => {
            // For combo products, use main_product for filtering
            if (this.isComboProduct(product)) {
                if (product.main_product) {
                    return this.filterMatchesMainProduct(product.main_product);
                }
                return false;
            }
            
            // Regular product filtering
            return this.filterMatchesProduct(product);
        });
    });
    
    // Remove empty categories
    this.filteredCompatibleProducts = this.filteredCompatibleProducts.filter(
        category => category.products && category.products.length > 0
    );
}</div>
            </div>
        </section>
        
        <section id="data-updates" class="mt-8 bg-white shadow sm:rounded-lg">
            <div class="px-4 py-5 sm:p-6">
                <h2 class="text-xl font-semibold text-gray-900 mb-4">Data Update Process</h2>
                <p class="text-gray-600 mb-4">
                    The application automatically updates its product data from an external FTP server without interrupting service.
                </p>
                
                <h3 class="text-lg font-medium text-gray-900 mb-2">Update Process:</h3>
                <ol class="list-decimal pl-5 mb-4 text-gray-600">
                    <li><strong>Scheduled Updates:</strong> The system checks for updates at 2:00 AM daily</li>
                    <li><strong>FTP Connection:</strong> Connects to the configured FTP server using stored credentials</li>
                    <li><strong>File Selection:</strong> Finds the most recent file with prefix "Product Data" and date suffix</li>
                    <li><strong>Validation:</strong> Downloads and validates the file structure before applying updates</li>
                    <li><strong>Backup:</strong> Creates a backup of the current data file</li>
                    <li><strong>In-Memory Update:</strong> Updates the data in memory without restarting the server</li>
                    <li><strong>Notifications:</strong> Sends email notifications on success or failure</li>
                </ol>
                
                <h3 class="text-lg font-medium text-gray-900 mb-2">Data Structure:</h3>
                <p class="text-gray-600 mb-4">
                    The Excel file contains multiple worksheets, each representing a different product category:
                </p>
                <ul class="list-disc pl-5 mb-4 text-gray-600">
                    <li>Shower Bases</li>
                    <li>Bathtubs</li>
                    <li>Showers</li>
                    <li>Tub Showers</li>
                    <li>Walls</li>
                    <li>Screens</li>
                    <li>Shower Doors</li>
                    <li>Tub Doors</li>
                    <li>Enclosures</li>
                    <li>Return Panels</li>
                </ul>
                
                <h3 class="text-lg font-medium text-gray-900 mb-2">Key Components:</h3>
                <table class="doc-table mb-4">
                    <thead>
                        <tr>
                            <th>Component</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>data_update_service.py</td>
                            <td>Orchestrates the entire update process</td>
                        </tr>
                        <tr>
                            <td>manage_ftp.py</td>
                            <td>Manages FTP credentials and manual update commands</td>
                        </tr>
                        <tr>
                            <td>email_notifications.py</td>
                            <td>Handles sending update status notifications via SendGrid</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>
        
        <section id="architecture" class="mt-8 bg-white shadow sm:rounded-lg">
            <div class="px-4 py-5 sm:p-6">
                <h2 class="text-xl font-semibold text-gray-900 mb-4">Application Architecture</h2>
                
                <h3 class="text-lg font-medium text-gray-900 mb-2">Technology Stack:</h3>
                <table class="doc-table mb-4">
                    <thead>
                        <tr>
                            <th>Component</th>
                            <th>Technology</th>
                            <th>Purpose</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Backend</td>
                            <td>Python + Flask</td>
                            <td>Server-side processing and API endpoints</td>
                        </tr>
                        <tr>
                            <td>Frontend</td>
                            <td>HTML + Tailwind CSS + AlpineJS</td>
                            <td>User interface and client-side interactivity</td>
                        </tr>
                        <tr>
                            <td>Data Processing</td>
                            <td>Pandas</td>
                            <td>Excel data manipulation and querying</td>
                        </tr>
                        <tr>
                            <td>Server</td>
                            <td>Gunicorn</td>
                            <td>WSGI HTTP Server</td>
                        </tr>
                        <tr>
                            <td>Notifications</td>
                            <td>SendGrid</td>
                            <td>Email notifications for data updates</td>
                        </tr>
                    </tbody>
                </table>
                
                <h3 class="text-lg font-medium text-gray-900 mb-2">Core Files and Their Functions:</h3>
                <table class="doc-table mb-6">
                    <thead>
                        <tr>
                            <th>File</th>
                            <th>Purpose</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>app.py</td>
                            <td>Main application routes and server configuration</td>
                        </tr>
                        <tr>
                            <td>main.py</td>
                            <td>Entry point for the application</td>
                        </tr>
                        <tr>
                            <td>logic/compatibility.py</td>
                            <td>Core compatibility checking logic</td>
                        </tr>
                        <tr>
                            <td>logic/base_compatibility.py</td>
                            <td>Compatibility logic for shower bases</td>
                        </tr>
                        <tr>
                            <td>logic/bathtub_compatibility.py</td>
                            <td>Specialized compatibility logic for bathtubs</td>
                        </tr>
                        <tr>
                            <td>logic/image_handler.py</td>
                            <td>Handles product image URL generation</td>
                        </tr>
                        <tr>
                            <td>data_update_service.py</td>
                            <td>Manages automatic data updates</td>
                        </tr>
                        <tr>
                            <td>email_notifications.py</td>
                            <td>Email notification system</td>
                        </tr>
                        <tr>
                            <td>templates/index.html</td>
                            <td>Main user interface template</td>
                        </tr>
                        <tr>
                            <td>static/js/app.js</td>
                            <td>Client-side JavaScript functionality</td>
                        </tr>
                    </tbody>
                </table>
                
                <h3 class="text-lg font-medium text-gray-900 mb-2">Data Flow Diagram:</h3>
                <div class="bg-gray-100 p-4 rounded-lg text-center mb-4">
                    <div class="inline-block mx-auto text-left text-gray-800">
                        <pre>
+---------------+       +---------------+       +---------------+
|   Excel File  |------>|  Data Update  |------>|  In-Memory    |
|  (FTP Server) |       |   Service     |       |  Data Cache   |
+---------------+       +---------------+       +-------+-------+
                                                       |
             +-------------------+                     |
             |                   |                     v
+------------v------+    +-------+-------+    +-------+-------+
|   User Interface  |<---|  Flask Routes  |<---|  Compatibility |
| (HTML + AlpineJS) |    |   (app.py)    |    |     Logic      |
+-------------------+    +---------------+    +---------------+
        </pre>
                    </div>
                </div>
            </div>
        </section>
        
        <section id="faq" class="mt-8 bg-white shadow sm:rounded-lg">
            <div class="px-4 py-5 sm:p-6">
                <h2 class="text-xl font-semibold text-gray-900 mb-4">FAQ & Troubleshooting</h2>
                
                <div class="space-y-4">
                    <div>
                        <h3 class="text-lg font-medium text-gray-900">Q: Why isn't a product showing up in compatibility results?</h3>
                        <p class="text-gray-600">
                            A: Products might not appear in compatibility results for several reasons:
                        </p>
                        <ul class="list-disc pl-5 mt-2 text-gray-600">
                            <li>The products might not be dimensionally compatible</li>
                            <li>The series might not be designed to work together</li>
                            <li>There might be brand/family matching restrictions</li>
                            <li>The product could be incorrectly categorized in the data</li>
                            <li>The data might be outdated (check the last update timestamp)</li>
                        </ul>
                    </div>
                    
                    <div>
                        <h3 class="text-lg font-medium text-gray-900">Q: How can I see when the data was last updated?</h3>
                        <p class="text-gray-600">
                            A: The application logs data update times in the data_update.log file. The system is configured 
                            to automatically update at 2:00 AM daily, but you can also trigger a manual update using the manage_ftp.py script.
                        </p>
                    </div>
                    
                    <div>
                        <h3 class="text-lg font-medium text-gray-900">Q: What happens if a data update fails?</h3>
                        <p class="text-gray-600">
                            A: If a data update fails, the system will:
                        </p>
                        <ol class="list-decimal pl-5 mt-2 text-gray-600">
                            <li>Continue using the most recent valid data</li>
                            <li>Log the error in data_update.log</li>
                            <li>Send an email notification to the configured recipients</li>
                            <li>Attempt the update again on the next scheduled run</li>
                        </ol>
                    </div>
                    
                    <div>
                        <h3 class="text-lg font-medium text-gray-900">Q: How are "combo" products handled?</h3>
                        <p class="text-gray-600">
                            A: Combo products (those with a main product and secondary components) are handled specially:
                        </p>
                        <ul class="list-disc pl-5 mt-2 text-gray-600">
                            <li>They are marked with is_combo=true in the data</li>
                            <li>They have both main_product and secondary_product objects</li>
                            <li>When filtering, the main_product's attributes are used</li>
                            <li>For ranking, the value is inherited from the main component</li>
                        </ul>
                    </div>
                    
                    <div>
                        <h3 class="text-lg font-medium text-gray-900">Q: What browser requirements does the application have?</h3>
                        <p class="text-gray-600">
                            A: The application is designed to work with modern browsers including:
                        </p>
                        <ul class="list-disc pl-5 mt-2 text-gray-600">
                            <li>Chrome 80+</li>
                            <li>Firefox 75+</li>
                            <li>Safari 13.1+</li>
                            <li>Edge 80+</li>
                        </ul>
                        <p class="text-gray-600 mt-2">
                            It uses modern JavaScript features and may not function correctly in older browsers.
                        </p>
                    </div>
                </div>
            </div>
        </section>
        
        <div class="mt-8 text-center text-gray-500 text-sm">
            <p>Documentation Last Updated: May 14, 2025</p>
        </div>
    </main>
</body>
</html>